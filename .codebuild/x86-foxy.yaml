version: 0.1

phases:
  pre_build:
    commands:
      - echo Nothing to do in the pre_build phase...
  build:
    commands:
      - cd ../ && cp -r image_processing_utils ~/colcon_ws/src
      - rosdep update
      - cd ~/colcon_ws && vcs import src < src/image_processing_utils/dependency.repos
      - cd ~/colcon_ws && rosdep install -r -y --from-paths . --ignore-src
#     - . /opt/ros/foxy/setup.sh && cd ~/colcon_ws && colcon build --symlink-install && colcon test && colcon test-result --verbose
      - . /opt/ros/foxy/setup.sh && cd ~/colcon_ws/src/image_processing_utils && bloom-generate rosdebian --os-name ubuntu --os-version focal --ros-distro foxy
      - . /opt/ros/foxy/setup.sh && cd ~/colcon_ws/src/image_processing_utils && fakeroot debian/rules binary
  post_build:
    commands:
      - echo Build completed on `date`
